<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <title>주유소 찾기</title>
    <link rel="stylesheet" th:href="@{/css/style.css}">
    <link rel="stylesheet" th:href="@{/css/AuthStyle.css}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/proj4js/2.11.0/proj4.js"></script>
</head>
<body>

<div th:replace="~{fragments/header :: headerBar}" class="header-container"></div>

<div class="split-container">

    <aside class="sidebar">
        <div class="sidebar-top">
            <h3>주변 주유소</h3>
            <div class="filter-box">
                <a href="#" id="filterButton" onclick="openModal('filterModal')" class="btn-filter">
                    <i class="fa-solid fa-filter"></i>
                </a>
            </div>
        </div>

        <div id="stationListContainer" class="station-list">
            <div class="empty-msg">
                <i class="fa-regular fa-map"></i>
                <p>지도를 움직이거나 검색을 시작하세요.</p>
            </div>
        </div>
    </aside>

    <main class="map-wrapper">
        <div id="map"></div>

        <button id="myLocationBtn" title="내 위치로">
            <i class="fa-solid fa-crosshairs"></i>
        </button>
    </main>
</div>

<div id="loginModal" class="modal-overlay">
    <div class="modal-box">
        <span class="close-btn" onclick="closeModal('loginModal')">&times;</span>
        <h2>로그인</h2>
        <form th:action="@{/login-proc}" method="post" class="auth-form">
            <input type="email" name="username" placeholder="이메일" required>
            <input type="password" name="password" placeholder="비밀번호" required>
            <button type="submit" class="btn-primary">로그인</button>
        </form>
        <div class="modal-footer">
            <a href="#" onclick="switchModal('loginModal', 'signupModal')">회원가입 하기</a>
        </div>
    </div>
</div>

<div id="signupModal" class="modal-overlay">
    <div class="modal-box">
        <span class="close-btn" onclick="closeModal('signupModal')">&times;</span>
        <h2>회원가입</h2>
        <form th:action="@{/signup}" method="post" class="auth-form">
            <input type="email" name="email" placeholder="이메일" required>
            <input type="text" name="nickname" placeholder="닉네임" required>
            <input type="password" name="password" placeholder="비밀번호" required>
            <button type="submit" class="btn-primary">가입하기</button>
        </form>
        <div class="modal-footer">
            <a href="#" onclick="switchModal('signupModal', 'loginModal')">로그인으로 돌아가기</a>
        </div>
    </div>
</div>

<div id="filterModal" class="modal-overlay">
    <div class="modal-box small">
        <span class="close-btn" onclick="closeModal('filterModal')">&times;</span>

        <h2 style="text-align: center; margin-bottom: 20px;">검색 옵션</h2>

        <div class="filter-content">

            <div class="filter-group">
                <h3><i class="fa-solid fa-ruler-horizontal"></i> 검색 반경</h3>
                <select id="radiusSelect" class="custom-select">
                    <option value="1000">반경 1km</option>
                    <option value="3000" selected>반경 3km</option>
                    <option value="5000">반경 5km</option>
                    <option value="10000">반경 10km</option>
                </select>
            </div>

            <hr style="border: 0; border-top: 1px solid #eee; margin: 15px 0;">

            <div class="filter-group">
                <h3><i class="fa-solid fa-gas-pump"></i> 유종 선택</h3>
                <div class="radio-options">
                    <label class="radio-label">
                        <input type="radio" name="fuelType" value="B027" checked>
                        <span>휘발유</span>
                    </label>
                    <label class="radio-label">
                        <input type="radio" name="fuelType" value="D047">
                        <span>경유</span>
                    </label>
                    <label class="radio-label">
                        <input type="radio" name="fuelType" value="B034">
                        <span>고급유</span>
                    </label>
                    <label class="radio-label">
                        <input type="radio" name="fuelType" value="K015">
                        <span>LPG</span>
                    </label>
                </div>
            </div>

            <hr style="border: 0; border-top: 1px solid #eee; margin: 15px 0;">

            <div class="filter-group">
                <h3><i class="fa-solid fa-sort"></i> 정렬 기준</h3>
                <div class="radio-options">
                    <label class="radio-label">
                        <input type="radio" name="sortType" value="1" checked>
                        <span>가격순</span>
                    </label>
                    <label class="radio-label">
                        <input type="radio" name="sortType" value="2">
                        <span>거리순</span>
                    </label>
                </div>
            </div>

        </div>

        <button onclick="applyFilter()" class="btn-primary full" style="margin-top: 25px;">
            설정 적용하기
        </button>
    </div>
</div>

<script type="text/javascript" th:src="|//dapi.kakao.com/v2/maps/sdk.js?appkey=${kakaoApiKey}&libraries=services|"></script>

<script th:src="@{/js/main.js}"></script>
</body>
</html>